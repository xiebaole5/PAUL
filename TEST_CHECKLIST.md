# 小程序快速测试清单

## 📋 测试前准备

- [x] 域名已配置（request、uploadFile、downloadFile）
- [x] 服务器服务正常运行
- [x] 小程序代码已导入到开发者工具
- [x] AppID 配置正确：`wx464504ca7e01b3b1`

## 🧪 快速测试流程

### 第 1 步：启动小程序

**操作**：点击微信开发者工具的 **编译** 按钮

**检查点**：
- [ ] 编译成功，无错误
- [ ] 模拟器显示小程序首页
- [ ] 控制台无网络错误

**如果失败** → 查看控制台错误信息

---

### 第 2 步：测试健康检查

**操作**：在小程序中点击任意按钮，观察控制台 Network 标签

**检查点**：
- [ ] 有网络请求
- [ ] 请求成功（状态码 200）
- [ ] 无网络错误

**验证命令（服务器端）**：
```bash
curl https://tnho-fasteners.com/health
```

**预期输出**：`{"status":"ok"}`

---

### 第 3 步：测试图片上传

**操作**：
1. 点击 **上传图片** 按钮
2. 选择一张本地图片
3. 观察上传进度

**检查点**：
- [ ] 图片选择成功
- [ ] 上传进度显示
- [ ] 返回图片 URL
- [ ] 图片预览显示

**如果失败** → 检查 `uploadFile` 合法域名配置

---

### 第 4 步：测试视频生成（文生视频）

**操作**：
1. 输入产品描述："高品质紧固件，工业应用场景"
2. 选择时长：20 秒
3. 选择主题：品质保证
4. 点击 **生成视频** 按钮
5. 等待进度完成

**检查点**：
- [ ] 提交成功
- [ ] 显示进度提示
- [ ] 3 分钟内完成
- [ ] 视频可以播放

**如果失败** → 检查 `request` 合法域名配置和服务器日志

---

### 第 5 步：测试视频生成（图生视频）

**操作**：
1. 点击 **上传产品图片** 按钮
2. 选择一张产品图片
3. 输入使用场景描述
4. 点击 **生成视频** 按钮
5. 等待完成

**检查点**：
- [ ] 图片上传成功
- [ ] 视频生成成功
- [ ] 视频包含图片元素

---

### 第 6 步：测试视频播放和下载

**操作**：
1. 等待视频生成完成
2. 点击视频播放
3. 测试下载功能

**检查点**：
- [ ] 视频可以播放
- [ ] 下载功能正常
- [ ] 分享功能正常

---

## ✅ 完整测试清单

### 基础功能

- [ ] 小程序启动正常
- [ ] 健康检查成功
- [ ] 无网络错误

### 图片功能

- [ ] 图片选择成功
- [ ] 图片上传成功
- [ ] 图片预览正常

### 视频生成（文生视频）

- [ ] 文本输入正常
- [ ] 时长选择正常
- [ ] 主题选择正常
- [ ] 提交任务成功
- [ ] 进度查询正常
- [ ] 视频生成完成
- [ ] 视频播放正常

### 视频生成（图生视频）

- [ ] 图片上传成功
- [ ] 场景描述输入正常
- [ ] 视频生成成功
- [ ] 视频播放正常

### 视频操作

- [ ] 视频播放正常
- [ ] 下载功能正常
- [ ] 分享功能正常

---

## 🚨 常见问题快速解决

### 问题：提示"不在合法域名列表中"

**原因**：域名配置未生效

**解决**：
1. 等待 5-10 分钟
2. 清除小程序缓存
3. 重新测试

---

### 问题：网络请求失败

**原因**：服务器未运行或网络问题

**解决**：
1. 检查服务器状态：`systemctl status tnho-api`
2. 检查网络连接
3. 查看 API 配置是否正确

---

### 问题：图片上传失败

**原因**：uploadFile 域名未配置

**解决**：
1. 确认 `uploadFile` 合法域名已配置
2. 检查图片大小（< 10MB）
3. 查看服务器日志：`journalctl -u tnho-api -f`

---

### 问题：视频生成超时

**原因**：服务器处理慢或 API 问题

**解决**：
1. 等待 3 分钟（最多轮询时间）
2. 查看服务器日志：`journalctl -u tnho-api -f`
3. 检查火山方舟 API Key

---

## 📊 测试结果记录

```
测试日期：_________
测试人员：_________

测试结果：
✅ 全部通过
⚠️ 部分通过
❌ 全部失败

通过项：
- [ ] 小程序启动
- [ ] 健康检查
- [ ] 图片上传
- [ ] 视频生成（文生视频）
- [ ] 视频生成（图生视频）
- [ ] 视频播放

失败项：
1. ___________________
2. ___________________
3. ___________________

备注：
__________________________________________
```

---

## 🚀 测试通过后的下一步

### 1. 真机测试

- [ ] 在真实手机上测试
- [ ] 测试不同网络环境（WiFi/4G/5G）
- [ ] 测试不同手机型号

### 2. 提交审核

- [ ] 在微信公众平台提交审核
- [ ] 确保所有功能正常
- [ ] 等待审核通过

### 3. 发布上线

- [ ] 审核通过后发布
- [ ] 通知用户使用
- [ ] 收集用户反馈

---

## 📞 需要帮助？

如果测试过程中遇到问题：

1. 查看控制台错误信息
2. 查看服务器日志：`journalctl -u tnho-api -n 50`
3. 参考 `MINIPROGRAM_TEST_GUIDE.md` 详细指南

---

**创建时间**：2026-01-14
**最后更新**：2026-01-14
