# 天虹紧固件视频生成小程序 - 使用指南

## 📱 项目简介

基于 AI 的紧固件宣传视频生成小程序，支持：
- 智能生成营销视频（融入红色 TNHO 商标）
- 生成营销脚本（场景描述、文案/旁白、音效）
- 支持上传产品图片和使用场景描述
- 多种主题和时长选择

---

## 🚀 快速开始

### 第 1 步：创建小程序项目

1. 打开微信开发者工具
2. 选择「小程序」->「JavaScript」
3. 选择「空白模板」
4. 填写项目信息：
   - **项目名称**：天虹视频生成
   - **AppID**：你的小程序 AppID（如果没有，选择测试号）
   - **开发模式**：小程序
   - **后端服务**：不使用云服务

5. 创建项目

---

### 第 2 步：导入代码文件

将以下文件复制到小程序项目目录：

```
miniprogram/
├── app.js          # 全局逻辑
├── app.json        # 小程序配置
├── app.wxss        # 全局样式
├── sitemap.json    # 站点地图
└── pages/
    ├── index/      # 首页
    │   ├── index.wxml
    │   ├── index.wxss
    │   └── index.js
    └── result/     # 结果页
        ├── result.wxml
        ├── result.wxss
        └── result.js
```

---

### 第 3 步：配置 API 地址

**已配置**：`http://47.110.72.148`

如果需要修改，编辑 `miniprogram/app.js`：

```javascript
globalData: {
  systemInfo: null,
  apiUrl: 'http://47.110.72.148'  // 修改为你的 API 地址
}
```

---

### 第 4 步：编译运行

1. 在微信开发者工具中点击「编译」
2. 在模拟器中预览小程序
3. 点击「真机调试」在手机上测试

---

## 📋 功能说明

### 首页功能

#### 1. 产品信息
- **产品名称**：必填，输入要生成视频的产品名称
- **宣传主题**：选择视频主题
  - 品质保证
  - 技术创新
  - 工业应用
  - 品牌形象

#### 2. 视频配置
- **生成类型**：
  - 生成视频：直接生成宣传视频
  - 生成脚本：生成营销脚本
- **视频时长**：选择视频时长（5、10、15、20、25、30秒）

#### 3. 产品图片
- **上传图片**：选填，上传产品图片可提升生成质量
- **图片要求**：
  - 格式：JPG、PNG
  - 大小：最大 5MB
  - 支持：相册选择、相机拍摄

#### 4. 使用场景
- **场景描述**：选填，描述产品的使用场景（最多200字）
- **示例**：汽车制造、太阳能支架、机械设备等

---

### 结果页功能

#### 视频结果
- **视频播放**：在线播放生成的视频
- **下载视频**：保存到手机相册
- **分享视频**：分享给微信好友或群

#### 脚本结果
- **脚本展示**：显示完整的营销脚本内容
- **复制脚本**：复制到剪贴板
- **分享脚本**：分享给微信好友或群

---

## 🎨 样式定制

### 主题色

默认主题色：`#D32F2F`（红色）

修改主题色，编辑 `miniprogram/app.wxss`：

```css
.btn-primary {
  background-color: #D32F2F;  /* 修改为你的颜色 */
}
```

修改导航栏颜色，编辑 `miniprogram/app.json`：

```json
{
  "window": {
    "navigationBarBackgroundColor": "#D32F2F",  /* 修改为你的颜色 */
    "navigationBarTitleText": "天虹视频生成"
  }
}
```

---

## 🔧 开发调试

### 本地调试

1. 在微信开发者工具中开启「不校验合法域名」
2. 位置：「详情」->「本地设置」->「不校验合法域名...」
3. 这样可以调用本地或测试服务器 API

### 真机调试

1. 点击「真机调试」
2. 用微信扫描二维码
3. 在手机上测试功能

### 查看日志

1. 打开微信开发者工具的控制台
2. 查看 `console.log` 输出
3. 查看 Network 请求

---

## 🚀 上线发布

### 第 1 步：申请小程序

1. 登录[微信公众平台](https://mp.weixin.qq.com/)
2. 注册小程序账号
3. 完善小程序信息

### 第 2 步：配置服务器域名

在小程序管理后台配置服务器域名：

1. 进入「开发」->「开发管理」->「开发设置」
2. 在「服务器域名」中配置：
   - **request合法域名**：`http://47.110.72.148` 或 `https://你的域名`
   - **uploadFile合法域名**：`http://47.110.72.148` 或 `https://你的域名`

**注意**：
- 测试阶段可以关闭域名校验
- 正式上线必须配置 HTTPS 域名

### 第 3 步：上传代码

1. 在微信开发者工具中点击「上传」
2. 填写版本号和项目备注
3. 上传成功

### 第 4 步：提交审核

1. 登录[微信公众平台](https://mp.weixin.qq.com/)
2. 进入「版本管理」
3. 提交审核
4. 等待审核通过（1-7个工作日）

### 第 5 步：发布上线

审核通过后，点击「全量发布」

---

## ❓ 常见问题

### Q1: 调用 API 失败？

**A:** 检查以下几点：
1. API 地址是否正确（`http://47.110.72.148`）
2. 服务器是否正常运行
3. 是否开启了「不校验合法域名」
4. 检查网络连接

### Q2: 图片上传失败？

**A:** 检查以下几点：
1. 图片格式是否为 JPG 或 PNG
2. 图片大小是否超过 5MB
3. 检查网络连接
4. 检查服务器是否正常运行

### Q3: 视频生成失败？

**A:** 检查以下几点：
1. 产品名称是否填写
2. 网络连接是否正常
3. 服务器 API 是否正常响应
4. 检查控制台错误日志

### Q4: 真机上无法调用 API？

**A:** 检查以下几点：
1. 是否关闭了「不校验合法域名」（真机需要开启）
2. 是否配置了服务器域名
3. 域名是否为 HTTPS（真机必须使用 HTTPS）

### Q5: 如何修改主题色？

**A:** 修改以下文件：
1. `miniprogram/app.wxss`：修改 `btn-primary` 的 `background-color`
2. `miniprogram/app.json`：修改 `navigationBarBackgroundColor`

---

## 📞 技术支持

如有问题，请联系技术支持。

---

## 📄 更新日志

### v1.0.0 (2025-01-13)
- ✅ 首次发布
- ✅ 支持视频生成
- ✅ 支持脚本生成
- ✅ 支持图片上传
- ✅ 支持场景描述
- ✅ 支持多种主题和时长选择
