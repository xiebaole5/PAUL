# å¿«é€Ÿå¼€å§‹ - é˜¿é‡Œäº‘éƒ¨ç½²

## ğŸš€ 5 åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²æŒ‡å—

### å‰ç½®æ¡ä»¶
- âœ… é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼ˆUbuntu 22.04 LTSï¼‰
- âœ… ç«å±±æ–¹èˆŸ API Key
- âœ… SSH è®¿é—®æƒé™

---

## ğŸ“ éƒ¨ç½²æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šè¿æ¥æœåŠ¡å™¨
```bash
ssh root@your-server-ip
```

### ç¬¬ 2 æ­¥ï¼šä¸‹è½½é¡¹ç›®æ–‡ä»¶åˆ°æœ¬åœ°

å°†ä»¥ä¸‹æ–‡ä»¶ä¸‹è½½åˆ°ä½ çš„æœ¬åœ°ç”µè„‘ï¼š
- `Dockerfile`
- `docker-compose.yml`
- `.env.example`
- `requirements.txt`
- `deploy.sh`
- `src/` ç›®å½•
- `config/` ç›®å½•
- `nginx/nginx.conf`

### ç¬¬ 3 æ­¥ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨

**åœ¨æœ¬åœ°æ‰§è¡Œ**ï¼š
```bash
# å‹ç¼©é¡¹ç›®æ–‡ä»¶
tar -czf tnho-project.tar.gz \
  Dockerfile \
  docker-compose.yml \
  .env.example \
  requirements.txt \
  deploy.sh \
  src/ \
  config/ \
  nginx/

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp tnho-project.tar.gz root@your-server-ip:/tmp/
```

### ç¬¬ 4 æ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šè§£å‹

**åœ¨æœåŠ¡å™¨æ‰§è¡Œ**ï¼š
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /opt/tnho-video-generator
cd /opt/tnho-video-generator

# è§£å‹é¡¹ç›®æ–‡ä»¶
tar -xzf /tmp/tnho-project.tar.gz -C /opt/tnho-video-generator
```

### ç¬¬ 5 æ­¥ï¼šè¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬

**åœ¨æœåŠ¡å™¨æ‰§è¡Œ**ï¼š
```bash
cd /opt/tnho-video-generator
chmod +x deploy.sh
./deploy.sh
```

è„šæœ¬ä¼šæç¤ºä½ è¾“å…¥ï¼š
- **ARK_API_KEY**: è¾“å…¥ä½ çš„ç«å±±æ–¹èˆŸ API Key
- **ARK_BASE_URL**: ç›´æ¥æŒ‰å›è½¦ä½¿ç”¨é»˜è®¤å€¼

### ç¬¬ 6 æ­¥ï¼šéªŒè¯éƒ¨ç½²

```bash
# æµ‹è¯• API å¥åº·æ£€æŸ¥
curl http://localhost/health

# æœŸæœ›è¾“å‡ºï¼š{"status":"ok"}
```

**åœ¨æµè§ˆå™¨è®¿é—®**ï¼š
```
http://your-server-ip
```

---

## âœ… å®Œæˆï¼

ä½ çš„æœåŠ¡å·²ç»éƒ¨ç½²æˆåŠŸï¼

### æœåŠ¡ä¿¡æ¯
- **API åœ°å€**: http://your-server-ip
- **å¥åº·æ£€æŸ¥**: http://your-server-ip/health
- **API ç«¯å£**: 8000ï¼ˆé€šè¿‡ Nginx ä»£ç†ï¼‰

### å¸¸ç”¨å‘½ä»¤
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/tnho-video-generator

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose stop
```

---

## ğŸ”§ é…ç½®å¾®ä¿¡å°ç¨‹åº

æ›´æ–°å°ç¨‹åºä¸­çš„ API åœ°å€ï¼š

```javascript
// miniprogram/pages/index/index.js
const API_BASE_URL = 'http://your-server-ip';
```

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£ï¼š[éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md)

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### 1. æœåŠ¡æ— æ³•å¯åŠ¨ï¼Ÿ
```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 80
```

### 2. API è°ƒç”¨å¤±è´¥ï¼Ÿ
```bash
# æµ‹è¯• API
curl http://localhost/api/health

# æ£€æŸ¥é˜²ç«å¢™
ufw status
ufw allow 80
```

### 3. å¦‚ä½•æ›´æ–°ä»£ç ï¼Ÿ
```bash
# ä¸Šä¼ æ–°æ–‡ä»¶åˆ°æœåŠ¡å™¨
cd /opt/tnho-video-generator
docker-compose down
docker-compose build
docker-compose up -d
```

---

## ğŸ‰ ä¸‹ä¸€æ­¥

1. é…ç½®é˜²ç«å¢™ï¼ˆå¦‚éœ€è¦ï¼‰
2. é…ç½®åŸŸåå’Œ SSL è¯ä¹¦ï¼ˆæ¨èï¼‰
3. æ›´æ–°å¾®ä¿¡å°ç¨‹åº API åœ°å€
4. æµ‹è¯•è§†é¢‘ç”ŸæˆåŠŸèƒ½

---

**éƒ¨ç½²æˆåŠŸï¼å¦‚æœ‰é—®é¢˜è¯·å‚è€ƒ[éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md)**
