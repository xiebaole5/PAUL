# å°ç¨‹åºæœåŠ¡å™¨åŸŸåé…ç½®æŒ‡å—

## ğŸ“‹ é…ç½®ä¿¡æ¯

- **å°ç¨‹åº AppID**ï¼š`wx464504ca7e01b3b1`
- **æœåŠ¡å™¨åŸŸå**ï¼š`https://tnho-fasteners.com`
- **é…ç½®çŠ¶æ€**ï¼šâœ… HTTPS å·²é…ç½®ï¼ˆLet's Encrypt è¯ä¹¦ï¼‰

## ğŸ”§ éœ€è¦é…ç½®çš„åŸŸåç±»å‹

å°ç¨‹åºéœ€è¦é…ç½®ä»¥ä¸‹ä¸‰ç§åŸŸåï¼š

| åŸŸåç±»å‹ | ç”¨é€” | é…ç½®å€¼ |
|---------|------|--------|
| **request** | API è¯·æ±‚åŸŸå | `https://tnho-fasteners.com` |
| **uploadFile** | æ–‡ä»¶ä¸Šä¼ åŸŸå | `https://tnho-fasteners.com` |
| **downloadFile** | æ–‡ä»¶ä¸‹è½½åŸŸå | `https://tnho-fasteners.com` |

## ğŸ“ é…ç½®æ­¥éª¤

### 1. ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°

1. è®¿é—®ï¼š[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)
2. ä½¿ç”¨å°ç¨‹åºç®¡ç†å‘˜è´¦å·ç™»å½•
3. è¿›å…¥ **å¼€å‘** â†’ **å¼€å‘ç®¡ç†** â†’ **å¼€å‘è®¾ç½®**

### 2. é…ç½®æœåŠ¡å™¨åŸŸå

#### é…ç½® request åˆæ³•åŸŸå

1. åœ¨ **æœåŠ¡å™¨åŸŸå** åŒºåŸŸï¼Œæ‰¾åˆ° **request åˆæ³•åŸŸå**
2. ç‚¹å‡» **ä¿®æ”¹** æŒ‰é’®
3. æ·»åŠ åŸŸåï¼š`https://tnho-fasteners.com`
4. ç‚¹å‡» **ä¿å­˜å¹¶æäº¤**

#### é…ç½® uploadFile åˆæ³•åŸŸå

1. åœ¨ **æœåŠ¡å™¨åŸŸå** åŒºåŸŸï¼Œæ‰¾åˆ° **uploadFile åˆæ³•åŸŸå**
2. ç‚¹å‡» **ä¿®æ”¹** æŒ‰é’®
3. æ·»åŠ åŸŸåï¼š`https://tnho-fasteners.com`
4. ç‚¹å‡» **ä¿å­˜å¹¶æäº¤**

#### é…ç½® downloadFile åˆæ³•åŸŸå

1. åœ¨ **æœåŠ¡å™¨åŸŸå** åŒºåŸŸï¼Œæ‰¾åˆ° **downloadFile åˆæ³•åŸŸå**
2. ç‚¹å‡» **ä¿®æ”¹** æŒ‰é’®
3. æ·»åŠ åŸŸåï¼š`https://tnho-fasteners.com`
4. ç‚¹å‡» **ä¿å­˜å¹¶æäº¤**

### 3. é…ç½®ä¸šåŠ¡åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœå°ç¨‹åºéœ€è¦ä½¿ç”¨ webview ç»„ä»¶æ‰“å¼€å¤–éƒ¨é“¾æ¥ï¼Œè¿˜éœ€è¦é…ç½®ä¸šåŠ¡åŸŸåï¼š

1. åœ¨ **ä¸šåŠ¡åŸŸå** åŒºåŸŸï¼Œç‚¹å‡» **ä¿®æ”¹**
2. æ·»åŠ åŸŸåï¼š`https://tnho-fasteners.com`
3. ä¸‹è½½æ ¡éªŒæ–‡ä»¶å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨æ ¹ç›®å½•
4. ç‚¹å‡» **ä¿å­˜å¹¶æäº¤**

## âœ… éªŒè¯é…ç½®

### 1. éªŒè¯ HTTPS è¯ä¹¦

```bash
# åœ¨æœåŠ¡å™¨ä¸ŠéªŒè¯ HTTPS è¯ä¹¦
curl -I https://tnho-fasteners.com

# æ£€æŸ¥è¯ä¹¦è¯¦ç»†ä¿¡æ¯
openssl s_client -connect tnho-fasteners.com:443 -servername tnho-fasteners.com </dev/null
```

**é¢„æœŸè¾“å‡º**ï¼š
```
HTTP/1.1 200 OK
Server: nginx
...
```

### 2. éªŒè¯ API æ¥å£

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl https://tnho-fasteners.com/health

# æµ‹è¯•å›¾ç‰‡ä¸Šä¼ æ¥å£
echo "test" > /tmp/test.txt
curl -X POST https://tnho-fasteners.com/api/upload-image \
  -F "file=@/tmp/test.txt"
```

### 3. åœ¨å°ç¨‹åºä¸­æµ‹è¯•

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥å°ç¨‹åºé¡¹ç›®ï¼ˆ`C:\Users\12187\Desktop\tnho-miniprogram`ï¼‰
3. ç‚¹å‡» **é¢„è§ˆ** æˆ– **çœŸæœºè°ƒè¯•**
4. æµ‹è¯•è§†é¢‘ç”ŸæˆåŠŸèƒ½
5. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰ç½‘ç»œè¯·æ±‚é”™è¯¯

## ğŸ” é…ç½®è¯´æ˜

### åŸŸåè¦æ±‚

1. **å¿…é¡»ä½¿ç”¨ HTTPS**ï¼šå°ç¨‹åºåªæ”¯æŒ HTTPS åè®®
2. **åŸŸåå¿…é¡»æ˜¯å¤‡æ¡ˆåŸŸå**ï¼šä¸­å›½å¤§é™†æœåŠ¡å™¨éœ€è¦åŸŸåå¤‡æ¡ˆ
3. **è¯ä¹¦å¿…é¡»æœ‰æ•ˆ**ï¼šSSL/TLS è¯ä¹¦å¿…é¡»æœ‰æ•ˆä¸”æœªè¿‡æœŸ
4. **ä¸æ”¯æŒ IP åœ°å€**ï¼šä¸æ”¯æŒä½¿ç”¨ IP åœ°å€ä½œä¸ºåŸŸå
5. **ä¸æ”¯æŒç«¯å£å·**ï¼šåŸŸååä¸èƒ½å¸¦ç«¯å£å·ï¼ˆé»˜è®¤ä½¿ç”¨ 443 ç«¯å£ï¼‰

### åŸŸåé™åˆ¶

- request åˆæ³•åŸŸåï¼šæœ€å¤š 20 ä¸ª
- uploadFile åˆæ³•åŸŸåï¼šæœ€å¤š 20 ä¸ª
- downloadFile åˆæ³•åŸŸåï¼šæœ€å¤š 20 ä¸ª
- ä¸šåŠ¡åŸŸåï¼šæœ€å¤š 100 ä¸ª

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: é…ç½®åä»ç„¶æç¤º"ä¸åœ¨ä»¥ä¸‹ request åˆæ³•åŸŸååˆ—è¡¨ä¸­"

**åŸå› **ï¼š
- åŸŸåé…ç½®åéœ€è¦ 5-10 åˆ†é’Ÿç”Ÿæ•ˆ
- å¯èƒ½æ˜¯ç¼“å­˜é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç­‰å¾… 10 åˆ†é’Ÿåé‡è¯•
2. æ¸…é™¤å°ç¨‹åºç¼“å­˜åé‡æ–°æµ‹è¯•
3. æ£€æŸ¥åŸŸåæ˜¯å¦å¡«å†™æ­£ç¡®ï¼ˆå¿…é¡»ä»¥ https:// å¼€å¤´ï¼‰

### Q2: é…ç½®æ—¶æç¤º"åŸŸåæœªå¤‡æ¡ˆ"

**åŸå› **ï¼šåŸŸåæœªå®Œæˆ ICP å¤‡æ¡ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨é˜¿é‡Œäº‘æˆ–å…¶ä»–åŸŸåæœåŠ¡å•†å®Œæˆ ICP å¤‡æ¡ˆ
2. å¤‡æ¡ˆå®Œæˆåé‡æ–°é…ç½®

### Q3: HTTPS è¯ä¹¦éªŒè¯å¤±è´¥

**åŸå› **ï¼šSSL/TLS è¯ä¹¦é…ç½®ä¸æ­£ç¡®æˆ–å·²è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸ
echo | openssl s_client -connect tnho-fasteners.com:443 -servername tnho-fasteners.com 2>/dev/null | openssl x509 -noout -dates

# å¦‚æœè¯ä¹¦å·²è¿‡æœŸï¼Œé‡æ–°ç”³è¯·è¯ä¹¦
sudo certbot renew --force-renewal
```

### Q4: é…ç½®åç½‘ç»œè¯·æ±‚å¤±è´¥

**åŸå› **ï¼š
- æœåŠ¡å™¨æœªæ­£å¸¸è¿è¡Œ
- é˜²ç«å¢™é˜»æ­¢ 443 ç«¯å£
- Nginx é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status tnho-api

# 2. æ£€æŸ¥ Nginx çŠ¶æ€
systemctl status nginx

# 3. æ£€æŸ¥é˜²ç«å¢™
sudo iptables -L -n | grep 443

# 4. æ£€æŸ¥ Nginx é…ç½®
sudo nginx -t
sudo systemctl reload nginx
```

### Q5: uploadFile ä¸Šä¼ å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- uploadFile åˆæ³•åŸŸåæœªé…ç½®
- æ–‡ä»¶è¿‡å¤§ï¼ˆå°ç¨‹åºé™åˆ¶ 10MBï¼‰
- æœåŠ¡å™¨ç«¯é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ uploadFile åˆæ³•åŸŸåå·²é…ç½®
2. æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶
3. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š`journalctl -u tnho-api -f`

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

åœ¨é…ç½®å®Œæˆåï¼Œè¯·é€é¡¹æ£€æŸ¥ï¼š

- [ ] request åˆæ³•åŸŸåå·²é…ç½®ä¸º `https://tnho-fasteners.com`
- [ ] uploadFile åˆæ³•åŸŸåå·²é…ç½®ä¸º `https://tnho-fasteners.com`
- [ ] downloadFile åˆæ³•åŸŸåå·²é…ç½®ä¸º `https://tnho-fasteners.com`
- [ ] HTTPS è¯ä¹¦æœ‰æ•ˆä¸”æœªè¿‡æœŸ
- [ ] æœåŠ¡å™¨æœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] å¥åº·æ£€æŸ¥æ¥å£å¯ä»¥è®¿é—®
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] å°ç¨‹åºå¯ä»¥æ­£å¸¸è°ƒç”¨æ¥å£

## ğŸš€ é…ç½®å®Œæˆå

### 1. æµ‹è¯•å°ç¨‹åºåŠŸèƒ½

åœ¨å°ç¨‹åºä¸­æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š
- [ ] è§†é¢‘ç”ŸæˆåŠŸèƒ½
- [ ] å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- [ ] è¿›åº¦æŸ¥è¯¢åŠŸèƒ½
- [ ] ç»“æœå±•ç¤ºåŠŸèƒ½

### 2. æäº¤å°ç¨‹åºå®¡æ ¸ï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœå°ç¨‹åºéœ€è¦å‘å¸ƒä¸Šçº¿ï¼š

1. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æäº¤å®¡æ ¸
2. ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
3. ç­‰å¾…å®¡æ ¸é€šè¿‡
4. å‘å¸ƒä¸Šçº¿

### 3. ç›‘æ§æœåŠ¡è¿è¡Œ

å®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status tnho-api

# æŸ¥çœ‹æ—¥å¿—
journalctl -u tnho-api -n 50

# æŸ¥çœ‹èµ„æºä½¿ç”¨
top -p $(pgrep -f "python.*app.py")
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. å°ç¨‹åº AppID
2. é…ç½®çš„åŸŸå
3. é”™è¯¯æç¤ºæˆªå›¾
4. å°ç¨‹åºæ§åˆ¶å°æ—¥å¿—
5. æœåŠ¡å™¨æ—¥å¿—ï¼š`journalctl -u tnho-api -n 100`

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [å°ç¨‹åºæœåŠ¡å™¨åŸŸåé…ç½®æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/server-communication/domain-config.html)
- [å°ç¨‹åºç½‘ç»œè¯·æ±‚æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/server-communication/network.html)
- [Let's Encrypt è¯ä¹¦æ–‡æ¡£](https://letsencrypt.org/docs/)

---

**åˆ›å»ºæ—¶é—´**ï¼š2026-01-14
**æœ€åæ›´æ–°**ï¼š2026-01-14
