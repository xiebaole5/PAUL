"""
天虹紧固件短视频脚本生成工具
支持 5-30秒 不同时长的定制化脚本生成
"""

from langchain.tools import tool

@tool
def generate_fastener_promo_script(
    duration: int = 20,
    product_name: str = "定制紧固件",
    theme: str = "品质保证",
    runtime=None
) -> str:
    """
    为天虹紧固件产品生成营销短视频脚本

    根据指定的时长（5-30秒），生成包含场景描述、文案/旁白、音效的完整视频脚本。
    脚本突出公司30余年经验、定制化生产能力、多行业应用等核心优势。

    Args:
        duration: 视频时长（秒），可选：5、10、15、20、25、30，默认20秒
        product_name: 产品名称（如：高强度螺栓、异形紧固件等）
        theme: 视频主题（品质保证、技术创新、工业应用、品牌形象）

    Returns:
        完整的视频脚本，包含场景、文案、音效
    """

    # 根据时长选择不同的脚本模板
    scripts = {
        5: _generate_5s_script(product_name, theme),
        10: _generate_10s_script(product_name, theme),
        15: _generate_15s_script(product_name, theme),
        20: _generate_20s_script(product_name, theme),
        25: _generate_25s_script(product_name, theme),
        30: _generate_30s_script(product_name, theme)
    }

    # 获取对应时长的脚本，如果没有则使用20秒默认
    script = scripts.get(duration, scripts[20])

    return script


def _generate_5s_script(product_name, theme):
    """5秒极简脚本 - 适合快速品牌曝光"""
    script = f"""
**视频时长：5秒**

**场景 (0-5秒)：**
*   **视觉：** 现代感十足的开场，红色TNHO商标醒目展示，背景是精密紧固件特写和智能制造设备的快速闪现。
*   **文案/旁白：** "浙江天虹紧固件，30余载匠心智造，定制{product_name}，铸就行业可靠基石。"
*   **音效：** 科技感开场音效，精密机械运转声，积极向上的品牌音乐收尾。

**关键元素：**
- 红色TNHO商标（T-N-H-O）
- 1987年成立标识
- 智能制造画面
- 行业应用场景快速切换
"""
    return script


def _generate_10s_script(product_name, theme):
    """10秒精简脚本 - 适合社交媒体快速传播"""
    script = f"""
**视频时长：10秒**

**场景1 (0-3秒)：**
*   **视觉：** 现代感开场，红色TNHO商标浮现，背景是工业自动化生产线模糊画面。
*   **文案/旁白：** "始于1987，浙江天虹紧固件，30余载匠心智造。"
*   **音效：** 科技感开场音效。

**场景2 (3-7秒)：**
*   **视觉：** 快速切换不同形状和尺寸的定制紧固件特写，展示高强度、长尺寸、异形件的多样性和精度。
*   **文案/旁白：** "从高强度到异形，从微小精密到大型结构，{product_name}，我们专为您的独特需求定制。"
*   **音效：** 机械组装的轻微敲击声。

**场景3 (7-10秒)：**
*   **视觉：** 公司联系方式（网址zjthfastener.com、电话）清晰显示，红色TNHO商标再次出现。
*   **文案/旁白：** "定制紧固件，信赖天虹。立即访问 zjthfastener.com！"
*   **音效：** 积极向上的品牌音乐收尾。

**关键元素：**
- 红色TNHO商标强调
- 30年经验突出
- 产品多样性展示
- 清晰的CTA（行动号召）
"""
    return script


def _generate_15s_script(product_name, theme):
    """15秒标准脚本 - 适合产品展示"""
    script = f"""
**视频时长：15秒**

**场景1 (0-3秒)：**
*   **视觉：** 现代感十足的开场动画，快速切换的精密紧固件特写镜头，红色TNHO商标"Zhejiang Tianhong Fasteners"浮现。
*   **文案/旁白：** "始于1987，浙江天虹紧固件，30余载匠心智造。"
*   **音效：** 科技感开场音效，精密机械运转声。

**场景2 (3-8秒)：**
*   **视觉：** 镜头聚焦于不同形状和尺寸的定制紧固件，包括长螺钉、U型螺栓、异形件，展示其复杂性和多样性。特写镜头强调产品精度和材料质感。
*   **文案/旁白：** "从高强度到异形，从微小精密到大型结构，{product_name}，我们专为您的独特需求定制。"
*   **音效：** 机械组装的轻微敲击声，背景音乐节奏感增强。

**场景3 (8-12秒)：**
*   **视觉：** 快速剪辑汽车制造、太阳能板安装、大型机械组装等场景，屏幕上文字列出"汽车"、"太阳能"、"机械设备"、"电表"。
*   **文案/旁白：** "汽车、太阳能、机械、电表，天虹紧固件，铸就行业可靠基石。"
*   **音效：** 行业相关背景音，背景音乐逐渐高昂。

**场景4 (12-15秒)：**
*   **视觉：** 公司联系方式（网址zjthfastener.com、电话）清晰显示，"立即联系"或"提交您的需求"文字，红色TNHO商标再次出现。
*   **文案/旁白：** "定制紧固件，信赖天虹。立即访问 zjthfastener.com！"
*   **音效：** 积极向上的品牌音乐收尾，渐出。

**关键元素：**
- 30余年历史
- 定制化能力
- 多行业应用
- 明确的联系方式
"""
    return script


def _generate_20s_script(product_name, theme):
    """20秒详细脚本 - 完整品牌宣传"""
    script = f"""
**视频时长：20秒**

**场景1 (0-3秒)：**
*   **视觉：** 现代感十足的开场动画，快速切换的精密紧固件特写镜头，背景是工业自动化生产线模糊画面。红色TNHO商标"Zhejiang Tianhong Fasteners"浮现。
*   **文案/旁白：** "始于1987，浙江天虹紧固件，30余载匠心智造。"
*   **音效：** 科技感开场音效，精密机械运转声。

**场景2 (3-8秒)：**
*   **视觉：** 镜头聚焦于不同形状和尺寸的定制紧固件，包括长螺钉、U型螺栓、异形件，展示其复杂性和多样性。特写镜头强调产品精度和材料质感。
*   **文案/旁白：** "从高强度到异形，从微小精密到大型结构，{product_name}，我们专为您的独特需求定制。"
*   **音效：** 机械组装的轻微敲击声，背景音乐节奏感增强。

**场景3 (8-14秒)：**
*   **视觉：** 快速剪辑汽车制造、太阳能板安装、大型机械组装等场景，展示天虹紧固件在各行业的应用。屏幕上文字简要列出"汽车"、"太阳能"、"机械设备"、"电表"。
*   **文案/旁白：** "汽车、太阳能、机械，乃至精密电表，天虹紧固件，铸就行业可靠基石。"
*   **音效：** 行业相关背景音（如引擎轰鸣、电流声），背景音乐逐渐高昂。

**场景4 (14-18秒)：**
*   **视觉：** 工程师专注工作的特写，数字化设计界面，或冷镦与CNC加工流程的片段。强调定制研发和生产实力。
*   **文案/旁白：** "凭借领先工艺与定制研发，我们为您打造超越标准的解决方案。"
*   **音效：** 键盘敲击声，图纸翻动声，背景音乐转为平稳且自信。

**场景5 (18-20秒)：**
*   **视觉：** 公司联系方式（网址zjthfastener.com、电话）清晰显示，并伴有"立即联系"或"提交您的需求"等行动号召文字。红色TNHO商标再次出现。
*   **文案/旁白：** "定制紧固件，信赖天虹。立即访问 zjthfastener.com！"
*   **音效：** 积极向上的品牌音乐收尾，渐出。

**关键元素：**
- 30余年历史（1987年成立）
- 定制化生产能力
- 多行业应用（汽车、太阳能、机械、电表）
- 技术实力（智能制造、研发能力）
- 明确的CTA
"""
    return script


def _generate_25s_script(product_name, theme):
    """25秒深度脚本 - 展示技术实力"""
    script = f"""
**视频时长：25秒**

**场景1 (0-3秒)：**
*   **视觉：** 现代感十足的开场动画，快速切换的精密紧固件特写镜头，背景是工业自动化生产线模糊画面。红色TNHO商标"Zhejiang Tianhong Fasteners"浮现。
*   **文案/旁白：** "始于1987，浙江天虹紧固件，30余载匠心智造。"
*   **音效：** 科技感开场音效，精密机械运转声。

**场景2 (3-9秒)：**
*   **视觉：** 镜头聚焦于不同形状和尺寸的定制紧固件，包括长螺钉、U型螺栓、异形件，展示其复杂性和多样性。特写镜头强调产品精度和材料质感。
*   **文案/旁白：** "专业生产高难度、特殊紧固件。从高强度到异形，从微小精密到大型结构，{product_name}，我们专为您的独特需求定制。"
*   **音效：** 机械组装的轻微敲击声，背景音乐节奏感增强。

**场景3 (9-15秒)：**
*   **视觉：** 快速剪辑汽车制造、太阳能板安装、大型机械组装、电表等场景，展示天虹紧固件在各行业的应用。
*   **文案/旁白：** "汽车、太阳能、机械设备、电表，天虹紧固件，铸就行业可靠基石。"
*   **音效：** 行业相关背景音，背景音乐逐渐高昂。

**场景4 (15-20秒)：**
*   **视觉：** 工程师专注工作的特写，数字化设计界面，冷镦与CNC加工流程，质检流程。强调定制研发、大规模智能制造能力。
*   **文案/旁白：** "凭借领先工艺、大规模智能制造与定制研发，我们为您打造超越标准的解决方案。"
*   **音效：** 键盘敲击声，图纸翻动声，背景音乐转为平稳且自信。

**场景5 (20-23秒)：**
*   **视觉：** 解决客户痛点场景：工程师拿着复杂图纸，与天虹团队讨论，最终得到满意的定制紧固件产品。
*   **文案/旁白：** "您的特殊紧固件需求，我们的定制化解决方案。"
*   **音效：** 讨论声，签字声，满意的笑声。

**场景6 (23-25秒)：**
*   **视觉：** 公司联系方式（网址zjthfastener.com、电话）清晰显示，"提交您的图纸和规格"、"联系我们获取定制解决方案"等行动号召。红色TNHO商标再次出现。
*   **文案/旁白：** "定制紧固件，信赖天虹。立即访问 zjthfastener.com，提交您的需求！"
*   **音效：** 积极向上的品牌音乐收尾，渐出。

**关键元素：**
- 30余年历史
- 高难度、特殊紧固件专长
- 多行业应用
- 大规模智能制造
- 客户痛点解决
- 明确的CTA
"""
    return script


def _generate_30s_script(product_name, theme):
    """30秒完整脚本 - 全面展示"""
    script = f"""
**视频时长：30秒**

**场景1 (0-3秒)：**
*   **视觉：** 现代感十足的开场动画，快速切换的精密紧固件特写镜头，背景是工业自动化生产线模糊画面。红色TNHO商标"Zhejiang Tianhong Fasteners"浮现。
*   **文案/旁白：** "始于1987，浙江天虹紧固件，30余载匠心智造。"
*   **音效：** 科技感开场音效，精密机械运转声。

**场景2 (3-10秒)：**
*   **视觉：** 镜头聚焦于不同形状和尺寸的定制紧固件，包括高强度螺栓、长螺钉、U型螺栓、异形件，展示其复杂性和多样性。特写镜头强调产品精度、材料质感和质量标准。
*   **文案/旁白：** "专业生产高难度、特殊紧固件制造商。专注定制非标紧固件，包括高强度、长尺寸和异形紧固件。从精密元件到大型结构件，{product_name}，我们提供全方位定制化解决方案。"
*   **音效：** 机械组装的轻微敲击声，背景音乐节奏感增强。

**场景3 (10-16秒)：**
*   **视觉：** 快速剪辑汽车制造、太阳能支架安装、大型机械设备组装、电表生产等场景，展示天虹紧固件在各行业的应用。屏幕上文字列出主要行业。
*   **文案/旁白：** "汽车、太阳能支架、机械设备、电表，天虹紧固件，服务于多个重要行业，铸就行业可靠基石。"
*   **音效：** 行业相关背景音（引擎声、电流声、机械声），背景音乐逐渐高昂。

**场景4 (16-22秒)：**
*   **视觉：** 工程师团队专注工作的特写，数字化设计界面，冷镦与CNC加工流程，自动化生产线，严格的质检流程。强调30多年经验、大规模智能制造能力、定制研发实力。
*   **文案/旁白：** "凭借30余年经验、大规模智能制造能力与定制研发，我们以领先工艺，为您打造超越标准的解决方案。"
*   **音效：** 键盘敲击声，图纸翻动声，生产线运转声，背景音乐转为平稳且自信。

**场景5 (22-26秒)：**
*   **视觉：** 客户痛点场景：B2B客户（企业采购、工程师、研发部门）遇到特殊紧固件需求，与天虹团队讨论，最终得到满意的定制紧固件产品，展现可靠的合作关系。
*   **文案/旁白：** "无论是企业采购、工程师还是研发部门，您的特殊紧固件需求，我们提供专业、高效的定制化解决方案。"
*   **音效：** 讨论声，签约声，满意的笑声。

**场景6 (26-30秒)：**
*   **视觉：** 公司联系方式（网址zjthfastener.com、电话）清晰显示，"联系我们获取定制解决方案"、"提交您的图纸和规格"、"立即咨询"等行动号召。红色TNHO商标再次出现，品牌标识强调。
*   **文案/旁白：** "专业、权威、创新、高效、注重品质和解决方案。定制紧固件，信赖天虹。立即访问 zjthfastener.com，联系我们！"
*   **音效：** 积极向上的品牌音乐收尾，渐出。

**关键元素：**
- 30余年历史（1987年成立）
- 高难度、特殊紧固件专长
- 多行业应用（汽车、太阳能、机械、电表）
- 大规模智能制造能力
- 定制研发实力
- B2B客户定位
- 客户痛点解决
- 专业、权威、创新、高效的语气
- 明确的CTA
- 红色TNHO商标强调
"""
    return script
