# æœåŠ¡å™¨é…ç½® - ç®€åŒ–ç‰ˆï¼ˆç›´æ¥å¤åˆ¶æ‰§è¡Œï¼‰

## ğŸ“Œ åœ¨æœåŠ¡å™¨ä¸Šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤

### æ­¥éª¤1ï¼šå®‰è£…Nginx

```bash
sudo apt update
sudo apt install nginx -y
```

### æ­¥éª¤2ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶

```bash
sudo nano /etc/nginx/sites-available/tnho-fasteners.com
```

æŒ‰ `Ctrl+O`, `Enter`, `Ctrl+X` ä¿å­˜å¹¶é€€å‡ºï¼ˆå¦‚æœæç¤ºæ˜¯å¦è¦†ç›–ï¼Œé€‰Yï¼‰

ç„¶ååœ¨æ–‡ä»¶ä¸­å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š

```
server {
    listen 80;
    server_name tnho-fasteners.com;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        return 301 https://$server_name$request_uri;
    }
}

server {
    listen 443 ssl http2;
    server_name tnho-fasteners.com;

    ssl_certificate /etc/letsencrypt/live/tnho-fasteners.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/tnho-fasteners.com/privkey.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    client_max_body_size 10M;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /assets/ {
        alias /app/assets/;
        expires 7d;
    }
}
```

ä¿å­˜æ–‡ä»¶ï¼š
1. æŒ‰ `Ctrl+O`
2. æŒ‰ `Enter`
3. æŒ‰ `Ctrl+X`

### æ­¥éª¤3ï¼šå¯ç”¨é…ç½®

```bash
sudo ln -s /etc/nginx/sites-available/tnho-fasteners.com /etc/nginx/sites-enabled/
sudo rm /etc/nginx/sites-enabled/default
```

### æ­¥éª¤4ï¼šåˆ›å»ºç›®å½•

```bash
sudo mkdir -p /var/www/certbot
sudo chown -R www-data:www-data /var/www/certbot
```

### æ­¥éª¤5ï¼šæµ‹è¯•é…ç½®

```bash
sudo nginx -t
```

åº”è¯¥æ˜¾ç¤ºï¼š`syntax is ok` å’Œ `test is successful`

### æ­¥éª¤6ï¼šå¯åŠ¨Nginx

```bash
sudo systemctl restart nginx
sudo systemctl enable nginx
```

### æ­¥éª¤7ï¼šæ£€æŸ¥NginxçŠ¶æ€

```bash
sudo systemctl status nginx
```

åº”è¯¥æ˜¾ç¤ºï¼š`active (running)`

### æ­¥éª¤8ï¼šæµ‹è¯•HTTPSè®¿é—®

```bash
curl https://tnho-fasteners.com/health
```

åº”è¯¥è¿”å›ï¼š`{"status":"ok"}`

---

## âœ… é…ç½®å®Œæˆï¼

å¦‚æœæ‰€æœ‰æ­¥éª¤éƒ½æˆåŠŸï¼Œé…ç½®å°±å®Œæˆäº†ï¼

### ä¸‹ä¸€æ­¥ï¼š

1. **é…ç½®Cloudflare**
   - ç™»å½• https://dash.cloudflare.com/
   - SSL/TLSæ¨¡å¼è®¾ç½®ä¸º Full

2. **é…ç½®å°ç¨‹åºåå°**
   - ç™»å½• https://mp.weixin.qq.com/
   - æ·»åŠ æœåŠ¡å™¨åŸŸåï¼š`https://tnho-fasteners.com`

3. **æµ‹è¯•å°ç¨‹åº**
   - ä½¿ç”¨AppID: wx464504ca7e01b3b1
   - å¯¼å…¥é¡¹ç›®å¹¶æµ‹è¯•

---

## âŒ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ï¼šnginx -t æµ‹è¯•å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
sudo nginx -t

# æ£€æŸ¥è¯ä¹¦
ls -la /etc/letsencrypt/live/tnho-fasteners.com/
```

### é—®é¢˜ï¼šHTTPSè®¿é—®å¤±è´¥

```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
ps aux | grep "python app.py"

# æŸ¥çœ‹Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# æµ‹è¯•ç›´æ¥è®¿é—®æœåŠ¡å™¨
curl -kI https://47.110.72.148/health
```

### é—®é¢˜ï¼šç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£
sudo netstat -tlnp | grep -E ":80|:443"
```

---

**è¯ä¹¦æœ‰æ•ˆæœŸ**ï¼š2026-04-13
**è‡ªåŠ¨ç»­æœŸ**ï¼šå·²é…ç½®
**APIåœ°å€**ï¼šhttps://tnho-fasteners.com
**å°ç¨‹åºAppID**ï¼šwx464504ca7e01b3b1
