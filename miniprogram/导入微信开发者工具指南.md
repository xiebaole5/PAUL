# 微信小程序导入开发者工具指南

## 📋 基本信息

- **小程序名称**: 天虹紧固件
- **AppID**: wx464504ca7e01b3b1
- **版本日期**: 2025-01-15
- **API地址**: https://tnho-fasteners.com

## 🚀 快速导入步骤

### 1. 下载小程序代码

代码位置: `/workspace/projects/miniprogram/`

### 2. 打开微信开发者工具

1. 打开微信开发者工具
2. 点击 "+" 号或 "导入项目"
3. 选择项目目录
   - **项目目录**: 选择本地的 `miniprogram` 文件夹
   - **AppID**: 选择 "小程序" → 填入 `wx464504ca7e01b3b1`
   - **项目名称**: 天虹紧固件

### 3. 验证配置

导入后，请检查以下配置：

#### 3.1 检查 project.config.json

```json
{
  "appid": "wx464504ca7e01b3b1",
  "projectname": "天虹紧固件",
  "description": "天虹紧固件视频生成小程序"
}
```

#### 3.2 检查 app.js 中的API地址

```javascript
globalData: {
  apiUrl: 'https://tnho-fasteners.com'
}
```

**重要**: 确保API地址正确，否则无法调用后端服务。

### 4. 测试运行

#### 4.1 本地测试

1. 点击 "编译" 按钮
2. 检查控制台是否有错误
3. 测试基本功能：
   - 输入产品名称
   - 选择主题
   - 选择时长
   - 上传产品图片
   - 点击生成按钮

#### 4.2 测试脚本生成

1. 选择 "脚本" 类型
2. 输入必填信息：
   - 产品名称: 高强度螺栓
   - 主题: 品质保证
   - 时长: 20秒
   - 场景: 用于汽车底盘连接
3. 点击生成
4. 预期结果：跳转到结果页，显示生成的脚本

#### 4.3 测试视频生成

1. 选择 "视频" 类型
2. 输入必填信息（同上）
3. 上传产品图片
4. 点击生成
5. 预期结果：
   - 显示 "生成中 0%" 进度提示
   - 每2秒更新进度
   - 完成后跳转到结果页，显示视频

## 🔧 API接口说明

### 1. 上传图片接口

```
POST https://tnho-fasteners.com/api/upload-image
```

参数:
- file: 图片文件（multipart/form-data）

响应:
```json
{
  "success": true,
  "image_url": "https://..."
}
```

### 2. 生成视频接口

```
POST https://tnho-fasteners.com/api/generate-video
```

参数:
```json
{
  "product_name": "产品名称",
  "theme": "主题",
  "duration": 20,
  "type": "script | video",
  "scenario": "使用场景",
  "product_image_url": "图片URL"
}
```

响应:
```json
{
  "success": true,
  "type": "video",
  "task_id": "任务ID"
}
```

### 3. 查询进度接口

```
GET https://tnho-fasteners.com/api/progress/{taskId}
```

响应:
```json
{
  "success": true,
  "progress": 50,
  "status": "processing",
  "message": "生成中 50%"
}
```

## ⚠️ 常见问题

### 1. 网络请求失败

**问题**: 提示 "request:fail url not in domain list"

**解决方案**:
- 在开发者工具中，点击右上角 "详情"
- 勾选 "不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书"
- 仅在开发模式下使用，正式发布需要在微信公众平台配置服务器域名

### 2. AppID 错误

**问题**: 提示 "appid not in appid list"

**解决方案**:
- 确保 AppID 输入正确: `wx464504ca7e01b3b1`
- 检查 project.config.json 中的 appid 字段

### 3. API连接失败

**问题**: 提示 "网络错误，生成失败"

**解决方案**:
- 检查 app.js 中的 apiUrl 是否正确
- 确认后端服务是否正常运行
- 在开发者工具中勾选 "不校验合法域名"

### 4. 图片上传失败

**问题**: 提示 "图片大小不能超过 5MB"

**解决方案**:
- 压缩图片后再上传
- 使用小于 5MB 的图片

## 📱 页面说明

### 1. 首页 (pages/index)

**功能**:
- 输入产品名称
- 选择主题（品质保证、技术创新、工业应用、品牌形象）
- 选择时长（5/10/15/20/25/30秒）
- 选择生成类型（脚本/视频）
- 输入使用场景
- 上传产品图片
- 点击生成按钮

### 2. 结果页 (pages/result)

**功能**:
- 显示生成的脚本内容
- 播放生成的视频
- 提供重新生成按钮

## 🎨 界面风格

- **主色调**: 红色 (#D32F2F) - 符合天虹品牌
- **背景色**: 浅灰色 (#F5F5F5)
- **文字色**: 白色标题 + 黑色正文

## 📦 完整文件清单

```
miniprogram/
├── app.js                  # 小程序入口文件
├── app.json                # 小程序配置
├── app.wxss                # 全局样式
├── project.config.json     # 项目配置
├── sitemap.json            # 站点地图配置
├── pages/
│   ├── index/              # 首页
│   │   ├── index.js
│   │   ├── index.json
│   │   ├── index.wxml
│   │   └── index.wxss
│   └── result/             # 结果页
│       ├── result.js
│       ├── result.json
│       ├── result.wxml
│       └── result.wxss
└── 文档/
    ├── 小程序使用指南.md
    ├── 快速启动指南.md
    └── 其他文档...
```

## ✅ 检查清单

导入完成后，请逐项检查：

- [ ] 项目成功导入，无报错
- [ ] AppID 配置正确 (wx464504ca7e01b3b1)
- [ ] API地址配置正确 (https://tnho-fasteners.com)
- [ ] 开发者工具中勾选 "不校验合法域名"
- [ ] 首页正常显示
- [ ] 能输入产品名称
- [ ] 能选择主题和时长
- [ ] 能上传图片
- [ ] 脚本生成功能正常
- [ ] 视频生成功能正常（需要后端服务运行）

## 🚀 后续步骤

1. 完成导入和基本测试
2. 确保后端服务正常运行
3. 测试完整的视频生成流程
4. 根据实际需求调整UI和功能
5. 准备正式发布（需要在微信公众平台配置服务器域名）

---

**更新时间**: 2025-01-15
**版本**: v1.0
